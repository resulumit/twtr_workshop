<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Working with Twitter Data in R</title>
    <meta charset="utf-8" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
  </head>
  <body>
    <textarea id="source">


class: inverse, center, middle



&lt;style type="text/css"&gt;

.hljs-github .hljs {
    background: #e5e5e5;
}

.inline-c, remark-inline-code {
   background: #e5e5e5;
   border-radius: 3px;
   padding: 4px;
   font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;
}


.yellow-h{
   background: #ffff88;
}


.out-t, remark-inline-code {
   background: #9fff9f;
   border-radius: 3px;
   padding: 4px;
   
}

.pull-left-c {
    float: left;
    width: 58%;
    
}

.pull-right-c {
    float: right;
    width: 38%;
    
}

.medium {
    font-size: 75%
    
}

.small {
    font-size: 50%
    }

.action {
    background-color: #f2eecb;
  
}


&lt;/style&gt;


# Working with Twitter Data in R

&lt;br&gt;

### Resul Umit

### February 2021

.footnote[

[Skip intro &amp;mdash; To the contents slide](#contents-slide). &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;a href="mailto:resuluy@uio.no?subject=R Markdown workshop"&gt;I can teach this workshop at your institution &amp;mdash; Email me&lt;/a&gt;.

]

---
## Who am I?

Resul Umit

- post-doctoral researcher at the University of Oslo

- interested in representation, elections, and parliaments
    - [a recent publication](https://doi.org/10.1177%2F1478929920967588):
    Parliamentary communication allowances do not increase electoral turnout or incumbents’ vote share.    
    
    - more at [resulumit.com](https://resulumit.com/)

---
## The Workshop &amp;mdash; Overview

- Two days, on how to collect, process, and analyse data from Twitter

  - 200+ slides, 40+ exercises, and time for working on a real project

--

- Based on converting a mock manuscript written in Word to R Markdown

  - plus, improving its reproducibility and version-controlling it
  - with a PDF output in mind

--

- Designed for researchers with basic knowledge of R programming language

  - does not cover programming with R
      - e.g., writing functions    
&lt;br&gt;
  - existing ability to work with data in R will be very helpful
      - but not absolutely necessary &amp;mdash; this ability can be developed during and after the workshop as well
        
---
name: contents-slide

## The Workshop &amp;mdash; Contents


[Part 1. Getting the Tools Ready](#part1)
   - e.g., downloading course material

[Part 2. Data Collection](#part2)
   - e.g., searching for and downloading tweets
   
[Part 2. Data Processing](#part3)
   - e.g., cleaning and tidying tweet-based datasets
   
[Part 2. Data Anaysis](#part4)
   - e.g., sentiment analysis   

.footnote[

[To the list of references](#reference-slide).

] 

---
## The Workshop &amp;mdash; Organisation

- Sit in groups of two

  - participants learn as much from their partner as from instructors
  - switch partners after every part

- Type, rather than copy and paste, the code that you will find on these slides

  - typing is a part of the learning process

- When you have a question

  - ask your partner
  - google together
  - ask me

---
class: action

## The Workshop &amp;mdash; Organisation &amp;mdash; Slides

Slides with this background colour indicate that your action is required, for

- setting the workshop up
    - e.g., installing R 
    
- completing the exercises
    - e.g., managing references in R Markdown
    - there are 40+ exercises
    - these slides have countdown timers
    
<div class="countdown" id="timer_5fec4dde" style="top:0;right:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
## The Workshop &amp;mdash; Organisation &amp;mdash; Slides

- Codes and texts that go in R Markdown documents .inline-c[appear as such &amp;mdash; in a different font, on gray background]
    - long codes and texts will have their own line(s)


```r
ggplot(data = df, mapping = aes(x = h5_median, y = h5_index, color = subfield)) +
       geom_point() +
       facet_wrap(. ~ branch) +
       scale_colour_discrete(name = "Journal Type", breaks = c(0, 1), labels = c("Generalist", "Subfield"))    
```

---
## The Workshop &amp;mdash; Organisation &amp;mdash; Slides

- Codes and texts that go in R Markdown documents .inline-c[appear as such &amp;mdash; in a different font, on gray background]
    - long codes and texts will have their own line(s)

- Results that come out in output files .out-t[appear as such &amp;mdash; in the same font, on green background]
    - except very obvious results, such as figures and tables
    
--
    
- Specific sections are .yellow-h[highlighted yellow as such] for emphasis
    - these could be for anything &amp;mdash; codes and texts in input, results in output, and/or texts on slides
    
--

- The slides are designed for self-study as much as for the workshop
    - *accessible*, in substance and form, to go through on your own

---
## The Workshop &amp;mdash; Aims

- To make you aware what is possible with R Markdown

  - we will cover a large breath of issues, not all of it is for long-term memory
      - one reason why the slides are designed for self study as well    
&lt;br&gt;
  - awareness of what is possible, `Google`, and perseverance are all we need

--

- To encourage you to convert into R Markdown 

  - practice with a mock manuscript (Parts 3&amp;ndash;9)
  - start converting a real one (Part 10)
    
---
name: part1
class: inverse, center, middle

# Part 1. Getting the Tools Ready

.footnote[

[Back to the contents slide](#contents-slide).

]

---
## Course Materials &amp;mdash; Overview

Materials, available at &lt;https://github.com/resulumit/rmd_workshop/tree/materials&gt;, have the following structure

```

rmd_workshop-materials
   |
   |- manuscript
   |  |
   |  |- reproduce_this.pdf
   |  |- journals.Rmd
   |  |- references.bib
   |  |- apa_7th.csl
   |
   |-data
   |  |
   |  |- journals.csv
   |
   |-image
   |  |
   |  |- google_scholar.png
   
   
```

---
name: download-zip
class: action

## Course Materials &amp;mdash; Download from the Internet

- Download the materials from &lt;https://github.com/resulumit/rmd_workshop/tree/materials&gt;

  - on the webpage, follow

&gt; `Code -&gt; Download ZIP`

&lt;br&gt;

- Unzip and rename the folder

  - unzip to a location that is not synced
     - e.g., perhaps Documents, but not Dropbox
  
  - rename the folder as `YOURNAME-rmd`
     - e.g., `resul-rmd`
     - this will come handy in Part 9
  
---
## Course Materials &amp;mdash; Contents

- `manuscript\reproduce_this.pdf`

    - the document, formatted in Word but saved as PDF, that we will re-create with R Markdown 
    - randomly generated sentences, with figures and tables from randomly a generated dataset&lt;sup&gt;*&lt;/sup&gt;
    - key sections in-need of attention are highlighted yellow
    
.footnote[

&lt;sup&gt;*&lt;/sup&gt; The text, _Lorem ipsum_, is generated with the `stringi` package (Gagolewski, 2020) while the dataset is created with the `fabricatr` package (Blair et al., 2019). 

]

---
## Course Materials &amp;mdash; Contents

- `manuscript\reproduce_this.pdf`
    - the document, formatted in Word but saved as PDF, that we will re-create with R Markdown 
    - randomly generated sentences, with figures and tables from randomly generated dataset
    - key sections in-need of attention are highlighted

- `manuscript\journals.Rmd`
    - the R Markdown document that we will work on
    - includes unformatted text from `reproduce_this.pdf` to save time
    - major components, such as paragraphs and tables, are numbered and marked in comments to facilitate navigation

--

- `manuscript\references.bib` 

    - a BibTeX document with three fabricated references

--

- `manuscript\apa_7th.csl`

    - a Citation Style Language document, with APA (7th Edition) referencing style (Wiernik, 2020)

---
## Course Materials &amp;mdash; Contents  

`data\journals.csv`
- a dataset created with the `fabricatr` package (Blair et al., 2019), imagined to explore the `Google Scholar` rankings of fictitious journals
    
- includes the following variables 
    - **name**: journals (1090 random titles)
    - **origin**: geographic origins (five continents)
    - **branch**: major discipline of journals (four branches)
    - **since**: time of first publication (years)
    - **h5_index**: H5 Index (integers)
    - **h5_median**: H5 Median (integers)
    - **english**: English (1) *vs.* other-language (0) journals
    - **subfield**: subfield (1) *vs.* generalist (0) journals
    - **issues**: number of issues published per year (integers)

---
## Course Materials &amp;mdash; Contents  

- `image\google_scholar.png`

    - a screeenshot image of the [Google Scholar homapage](https://scholar.google.ch/)

---
class: action
name: install-git

## Git &amp;mdash; Download from the Internet and Install

- For Windows, install 'Git for Windows', downloading from [https://gitforwindows.org](https://gitforwindows.org/)
       - select 'Git from the command line and also from 3rd-party software'
       
- For Mac, install 'Git', downloading from [https://git-scm.com/downloads](https://git-scm.com/downloads)

---
class: action

## GitHub &amp;mdash; Open an Account

Sign up for GitHub at [https://github.com](https://github.com/)

- registering an account is free

- usernames are public
      - either choose an anonymous username (e.g., `asdf029348`)
      - or choose one carefully &amp;mdash; it becomes a part of users' online presence
      
- usernames can be changed later
        
---
class: action

## R and RStudio &amp;mdash; Download from the Internet and Install

- Download R from [https://cloud.r-project.org](https://cloud.r-project.org)
    - choose the version for your operating system

- Download RStudio from [https://rstudio.com/products/rstudio/download](https://rstudio.com/products/rstudio/download)
    - choose the free version

---
class: action

## R Packages &amp;mdash; Install from within RStudio


```r
install.packages(c("rmarkdown", "tinytex", "dplyr", "stargazer", "ggplot2"))

tinytex::install_tinytex()
```

--

- `rmarkdown` (Allaire et al., 2020), for automating the process of converting R Markdown documents into other formats

---
class: action

## R Packages &amp;mdash; Install from within RStudio


```r
install.packages(c("rmarkdown", "tinytex", "dplyr", "stargazer", "ggplot2"))

*tinytex::install_tinytex()
```

- `rmarkdown` (Allaire et al., 2020), for automating the process of converting R Markdown documents into other formats

- `tinytex` (Xie, 2020), for PDF outputs
    - requires an additional step to install
    - alternative: a TeX/LaTeX system installed on your computer

---
class: action

## R Packages &amp;mdash; Install from within RStudio


```r
install.packages(c("rmarkdown", "tinytex", "dplyr", "stargazer", "ggplot2"))

tinytex::install_tinytex()
```


- `dplyr` (Wickham, 2020a), for data manipulation
    - alternatives: e.g., `base`, `data.table` (Dowle &amp; Srinivasan, 2019)

--

- `stargazer` (Hlavac, 2018), for tables
    - alternatives: e.g., `knitr` (Xie, 2020b), `kableExtra` (Zhu, 2019)
    
--

    
- `ggplot2` (Wickham, 2020b), for figures
    - alternatives: e.g., `base`, `plotly` (Sievert et al., 2020)

---
class: action
name: rstudio-project

## RStudio Project &amp;mdash; Create from within RStudio 

- RStudio allows for dividing your work with R into separate projects, each with own history etc.

  - [this page](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects) has more information on why projects are recommended

&lt;br&gt;

- Create a new RStudio project for the existing&lt;sup&gt;*&lt;/sup&gt; workshop directory `...\YOURNAME-rmd` from the RStudio menu:

&gt; `File -&gt; New Project -&gt; Existing Directory -&gt; Browse -&gt; ...\YOURNAME-rmd -&gt; Open`


.footnote[

&lt;sup&gt;*&lt;/sup&gt; Recall that we have downloaded this earlier from GitHub. [Back to the relevant slide](#download-zip).

]

---
class: action

## R Markdown Cheat Sheet &amp;mdash; Download from the Internet

Downloading process can be initiated from within RStudio

- follow from the RStudio menu

&gt; `Help -&gt; Cheatsheets -&gt; R Markdown Cheat Sheet` 


---
## Other Resources&lt;sup&gt;*&lt;/sup&gt;

- Pandoc User's Guide

   - available at [https://pandoc.org/MANUAL.html](https://pandoc.org/MANUAL.html)

- R Markdown: The Definitive Guide (Xie et al., 2019)

   - open access at [https://bookdown.org/yihui/rmarkdown](https://bookdown.org/yihui/rmarkdown/)
    

- R for Data Science (Wickham and Grolemund, 2019)
  
   - open access at [https://r4ds.had.co.nz](https://r4ds.had.co.nz/)
   
.footnote[

&lt;sup&gt;*&lt;/sup&gt; During the workshop, R Markdown Cheat Sheet is likely to be more helpful than these resources, which I recommend to be consulted after the workshop.

]

---
name: part2
class: inverse, center, middle

# Part 2. Introducing R Markdown

.footnote[

[Back to the contents slide](#contents-slide).

]


---
class: inverse, center, middle

# References

.footnote[

[Back to the contents slide](#contents-slide).

]

---
name: reference-slide
## References

Allaire, J. J., Xie, Y., McPherson, J., Luraschi, J., Ushey, K., Atkins, A., Wickham, H., Cheng, J., Chang, W. and Iannone, R. (2020). [rmarkdown: Dynamic documents for R](https://cran.r-project.org/web/packages/rmarkdown/index.html). R package, version 2.1.

Blair, G., Cooper, J., Coppock, A., Humphreys, M., Rudkin, A. and Fultz, N. (2019). [fabricatr: Imagine your data before you collect it](https://cran.r-project.org/web/packages/fabricatr/index.html). R package, version 0.10.0.

Carlisle, D., Fairbairns, R., Harris, E. and Tobin, G. (2011). [setspace – Set space between lines](https://ctan.org/pkg/setspace). LaTeX package, version 6.7a.

Dowle, M. and Srinivasan, A. (2019). [data.table: Extension of 'data.frame'](https://cran.r-project.org/web/packages/data.table/index.html). R package, version 1.12.8.

Gagolewski, M. (2020). [stringi: Character String Processing Facilities](https://cran.r-project.org/web/packages/stringi/index.html). R package, version 1.4.6.

Hlavac, M. (2018). [stargazer: Well-formatted regression and summary statistics tables](https://cran.r-project.org/web/packages/stargazer/index.html). R package, version 5.2.2.

Wickham, H. and Grolemund, G. (2019). R for data science. O'Reilly. Open access at [https://r4ds.had.co.nz](https://r4ds.had.co.nz/).

Wickham, H., Chang, W., Henry, L., Pedersen, T. L., Takahashi, K., Wilke, C., Woo, K., Yutani, H. and Dunnington, D. (2020a). [dplyr: A grammar of data manipulation](https://cran.r-project.org/web/packages/dplyr/index.html). R package, version 0.8.5.

---
## References

Wickham, H., François, W., Henry L. and Müller, K. (2020b). [ggplot2: Create elegant data visualisations using the grammar of graphics](https://cran.r-project.org/web/packages/ggplot2/index.html). R package, version 0.8.5.

Wiernik, B. M. (2020). [American Psychological Association 7th edition (no ampersand)](https://www.zotero.org/styles/apa-no-ampersand). Citation style language file, version 1.0.

Xie, Y. (2020a). [tinytex: Helper functions to install and maintain TeX Live and compile LaTeX documents](https://cran.r-project.org/web/packages/tinytex/index.html). R package, version 0.21.

Xie, Y. (2020b). [knitr: A general-purpose package for dynamic report generation in R](https://cran.r-project.org/web/packages/knitr/index.html). R package, version 1.28.

Xie, Y. (2020c). [bookdown: Authoring books and technical documents with R Markdown](https://cran.rstudio.com/web/packages/bookdown/index.html). R package, version 0.18.

Xie, Y. (2020d). [blogdown: Create blogs and websites with R Markdown](https://cran.r-project.org/web/packages/blogdown/index.html). R package, version 0.18.

Xie, Y., Allaire, J. J., and Grolemund, G. (2019). R markdown: The definitive guide. CRC Press. Open access at [https://bookdown.org/yihui/rmarkdown](https://bookdown.org/yihui/rmarkdown/).

Zhu, H. (2019). [kableExtra: Construct Complex Table with 'kable' and Pipe Syntax](https://cran.r-project.org/web/packages/kableExtra/index.html). R package, version 1.1.0.

---
class: middle, center

## The workshop ends here.
## Congradulations for making it this far, and
## thank you for joining me!

.footnote[

[Back to the contents slide](#contents-slide).

]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"highlightSpans": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
